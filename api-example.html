<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Amilia Demo Organization</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
		
		<script src="javascripts/jquery-2.0.3.min.js" type="text/javascript"></script>
		<script src="javascripts/bootstrap.min.js" type="text/javascript"></script>
		<script src="javascripts/underscore.min.js" type="text/javascript"></script>
		<script src="javascripts/moment.min.js" type="text/javascript"></script>
		<script src="javascripts/fullcalendar.min.js" type="text/javascript"></script>

		<link href="stylesheets/bootstrap.css" rel="stylesheet" type="text/css" charset="utf-8">
		<link href="stylesheets/main.css" rel="stylesheet" type="text/css" charset="utf-8">
		<link href="stylesheets/fullcalendar.min.css" rel="stylesheet" type="text/css" charset="utf-8">
		<link href="https://www.amilia.com/scripts/amilia-iframe.css" rel="stylesheet" type="text/css" charset="utf-8">

		<script src="javascripts/amilia-api-helpers.js" type="text/javascript"></script>
		<script>
			$(document).ready(function() {
				AMILIA.buildTable('usa-amilia-group', 'en', 'Art', 'table#art-activities');
				AMILIA.buildTable('usa-amilia-group', 'en', 'Circus', 'table#circus-activities');
				$('#calendar').fullCalendar({
				  locale: 'en',
				  events: 'https://www.amilia.com/PublicApi/usa-amilia-group/en/Events',
				  header: {
				    left: 'month,agendaWeek,agendaDay',
				    center: 'title',
				    right: 'prev,next'
				  },
				  defaultDate: moment('2013-10-01')
				});
				$.get('https://www.amilia.com/PublicApi/usa-amilia-group/en/Events?start=2013-10-28').done(function(events) {
				  var $ul = $('ul#day-events');
				  for (var i = 0; i < events.length; i++) {
				    var event = events[i];
				    $ul.append('<li><a href="' + event.url + '">' + event.title + '</a></li>');
				  }
				});

				$('.code-toggle').on('click', function() {
					var $button = $(this),
						$panel = $('#' + $button.attr('for'));

					if ($button.hasClass('btn-success')) {
						$button.removeClass('btn-success').addClass('btn-warning').text('Hide code');
						$panel.slideDown();
					} else {
						$button.removeClass('btn-warning').addClass('btn-success').text('Show code');
						$panel.slideUp();
					}
				})
			});
		</script>
	</head>
	<body>
		<header class="navbar navbar-default">
			<div class="container">
				<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
					<a class="navbar-brand" href="index.html"><span>Amilia Demo Organization</span></a>
				</div>
				<div class="collapse navbar-collapse" id="navbar-collapse">
					<ul class="nav navbar-nav navbar-left">
						<li><a href="index.html">IFRAME Example</a></li>
                        <li><a href="api-documentation.html">API Documentation</a></li>
                        <li class="active"><a href="api-example.html">API Example</a></li>
					</ul>
				</div>
			</div>
		</header>
		<div class="container">
			<div class="row splash">
				<div class="left col-md-6">
					<div class="content">
						<p class="lead">
							This API example shows how you can retrieve activities from Amilia and display them on your website.
							<a href="https://www.amilia.com/store/en/usa-amilia-group/shop" target="_blank">Its store can be found here on Amilia.</a>
						</p>
					</div>
				</div>
				<div class="right col-md-6">
					<img class="img-responsive" src="images/splash.jpg" />
				</div>
			</div>
			<br/>

			<div class="row">
				<div class="col-md-12">
					<h1>Table views</h1>
					<p>
						By retrieving a list of activities, you can render a table.
						This can be performed either back-end, in your language of choice, or front-end directly in the page using Javascript.
						The following examples use Javascript to render these tables.
					</p>
					<h3>amilia-api-helpers.js</h3>
					<p>
						File <a href="javascripts/amilia-api-helpers.js" target="_blank">amilia-api-helpers.js</a> contains a helper function <code>AMILIA.buildTable</code> that you can use. It has this signature:
					</p>
					<p><code>AMILIA.buildTable(rewriteUrl, lang, tagName, tableElement)</code></p>
					<ul>
						<li><strong>rewriteUrl</strong>: Your organization's <code>RewriteUrl</code> parameter (<a href="api-documentation.html">as described in API documentation</a>).</li>
						<li><strong>lang</strong>: Language to return. Either <code>en</code> or <code>fr</code>.</li>
						<li><strong>tagName</strong>: Name of the <strong>tag</strong> that you defined in Amilia. Has to be in the language you specified.</li>
						<li><strong>tableElement</strong>: The <code>table</code> element you have embeded on your page. It will be filled with activities retrieved from the API.</li>
					</ul>
					<p>
						Feel free to use and modify this file to your liking for your own website.
					</p>
				</div>
			</div>
			<br/>

			<div class="row">
				<div class="col-md-12">
					<h2>Art activities</h2>
					<table id="art-activities" class="table table-striped"></table>
					<p><button class="btn btn-success code-toggle" for="art-activities-code">Show code</button></p>
				</div>
			</div>
			<div id="art-activities-code" class="row panel panel-default" style="display: none;">
				<div class="col-md-10">
					<p>
						This table was generated by first declaring the follow element in HTML:
					</p>
					<pre>&lt;table id="art-activities" class="table table-striped"&gt;&lt;/table&gt;</pre>
					<p>
						And by using this Javascript:
					</p>
					<pre>
$(document).ready(function() {
  AMILIA.buildTable('usa-amilia-group', 'en', 'Art', 'table#art-activities');
});
					</pre>
				</div>
			</div>
			<br/>
			
			<div class="row">
				<div class="col-md-12">
					<h2>Circus activities</h2>
					<table id="circus-activities" class="table table-striped"></table>
					<p><button class="btn btn-success code-toggle" for="circus-activities-code">Show code</button></p>
				</div>
			</div>
			<div id="circus-activities-code" class="row panel panel-default" style="display: none;">
				<div class="col-md-10">
					<br/>
					<p>
						This table was generated by first declaring the follow element in HTML:
					</p>
					<pre>&lt;table id="circus-activities" class="table table-striped"&gt;&lt;/table&gt;</pre>
					<p>
						And by using this Javascript:
					</p>
					<pre>
$(document).ready(function() {
  AMILIA.buildTable('usa-amilia-group', 'en', 'Circus', 'table#circus-activities');
});
					</pre>
					<br/>
				</div>
			</div>
			<br/>

			<div class="row">
				<div class="col-md-12">
					<h1>Event Views</h1>
					<p>
						Use the <a href="api-documentation.html#events-section">Events API</a> to fetch ongoing activities for a given date range on active programs.
						The call returns all events (classes or drop-ins) that are happening in the given days.
						For example, you can show a list of activities for the day, and show that on a television or your website.
						You can also show a calendar view of activities in a given month, week or day.
					</p>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<h2>Day view</h2>
					<p>
						On your website, show visitors what's going on today in a list view.
					</p>
					<div class="row">
						<div class="col-md-3">
							<div class="panel panel-info">
								<div class="panel-heading">
									<h3 class="panel-title">Today</h3>
								</div>
								<div class="panel-body">
									<ul id="day-events"></ul>
								</div>
							</div>
						</div>
					</div>
					<p><button class="btn btn-success code-toggle" for="day-events-code">Show code</button></p>
					<div id="day-events-code" class="row panel panel-default" style="display: none;">
						<div class="col-md-10">
							<br/>
							<p>
								This list was generated by first declaring the follow element in HTML:
							</p>
							<pre>&lt;ul id="day-events-code"&gt;&lt;/ul&gt;</pre>
							<p>
								And by using this Javascript:
							</p>
							<pre>
$.get('https://www.amilia.com/PublicApi/usa-amilia-group/en/Events?start=2013-10-28').done(function(events) {
  var $ul = $('ul#day-events');
  for (var i = 0; i < events.length; i++) {
    var event = events[i];
    $ul.append('&lt;li&gt;&lt;a href="' + event.url + '"&gt;' + event.title + '&lt;/a&gt;&lt;/li&gt;');
  }
});</pre>
							<br/>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<h2>Calendar</h2>
					<p>
						You can use <a href="https://fullcalendar.io" target="_blank">FullCalendar</a> to show events on your website.
						The <a href="api-documentation.html#events-section">Events API</a> call works with FullCalendar out of the box.
						Simply pass it in the <code>events</code> option to feed the calendar.
					</p>
					<p><button class="btn btn-success code-toggle" for="calendar-code">Show code</button></p>
					<div id="calendar-code" class="row panel panel-default" style="display: none;">
						<div class="col-md-10">
							<br/>
							<p>
								This calendar was generated by first declaring the follow element in HTML:
							</p>
							<pre>&lt;div id="calendar"&gt;&lt;/div&gt;</pre>
							<p>
								You must also load the FullCalendar script and stylesheets in the document HEAD section:
							</p>
							<pre>
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.js" type="text/javascript">&lt;/script&gt;
&lt;link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.css" rel="stylesheet" type="text/css" charset="utf-8"&gt;
</pre>
							<p>
								And by using this Javascript:
							</p>
							<pre>
$('#calendar').fullCalendar({
  locale: 'en',
  events: 'https://www.amilia.com/PublicApi/usa-amilia-group/en/Events',
  header: {
    left: 'month,agendaWeek,agendaDay',
    center: 'title',
    right: 'prev,next',
		defaultDate: moment('2013-10-01')
  }
});
							</pre>
							<br/>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div id="calendar"></div>
				</div>
			</div>
			<br/>

		</div>

		<footer>
			<div class="container">
				<p class="pull-left">&copy; 2017 <a href="https://www.amilia.com/en">Amilia Inc.</a></p>
				<p class="pull-right">Embed your Amilia Store using an IFRAME. <a href="https://github.com/AmiliaApp/amilia-demo-organization">Follow instructions on Github.</a></p>
			</div>
		</footer>
	</body>
</html>
