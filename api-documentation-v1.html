<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Amilia Demo Organization</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
		
		<script src="javascripts/jquery-2.0.3.min.js" type="text/javascript"></script>
		<script src="javascripts/bootstrap.min.js" type="text/javascript"></script>
		<link href="stylesheets/bootstrap.css" rel="stylesheet" type="text/css" charset="utf-8">
		
		<link href="stylesheets/main.css" rel="stylesheet" type="text/css" charset="utf-8">

		<link href="https://www.amilia.com/scripts/amilia-iframe.css" rel="stylesheet" type="text/css" charset="utf-8">
	</head>
	<body>
		<header class="navbar navbar-default">
			<div class="container">
				<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
					<a class="navbar-brand" href="index.html"><span>Amilia Demo Organization</span></a>
				</div>
				<div class="collapse navbar-collapse" id="navbar-collapse">
					<ul class="nav navbar-nav navbar-left">
						<li><a href="index.html">IFRAME Example</a></li>
						<li class="active"><a href="api-documentation.html">API Documentation</a></li>
						<li><a href="api-example.html">API Example</a></li>
					</ul>
				</div>
			</div>
		</header>
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h1>Amilia Public API Documentation</h1>
					<p>
						The Amilia API allows an organization to fetch information.
						Currently, the API is limited to public calls without authentication.
						The API returns JSON.
					</p>
					<p>
						All calls are performed from the PublicApi endpoint. In addition, calls take two path arguments RewriteUrl and Lang.
					</p>
					<p><code>https://www.amilia.com/PublicApi/[rewriteUrl]/[lang]/</code></p>
					<p>
						Argument <code>RewriteUrl</code> represents your organization and is unique to you.
						It can be found in your Amilia <strong>Account</strong> under <strong>Options</strong>.
					</p>
					<p>
						The API always returns localized information.
						Since in Amilia, some user-input can be either in French or English, you must always specify the language your are fetching for.
						Argument <code>lang</code> can either be <code>fr</code> or <code>en</code>.
					</p>
					<blockquote>
						You can test the API directly here in your browser.
						Examples GET calls provided are called using jQuery <code>$.get</code>.
						Just hit F12 to open a developer console, and type in the example GET calls documented below.
					</blockquote>

					<h2>Tags</h2>
					<p><code>/PublicApi/[RewriteUrl]/[Lang]/Tags</code></p>
					<p>
						The <code>tags</code> API allows you to retrieve the list of tags you have defined in Amilia.
						You can then fetch activities provided a tag.
						Tags can be defined in your Amilia <strong>Account</strong> under <strong>Tags</strong>.
						You can then attach them to your activities.
					</p>
					<h3>Example</h3>
					<pre>$.get('https://www.amilia.com/PublicApi/usa-amilia-group/en/Tags');</pre>
					<h3>Result</h3>
					<pre>
[
  {
    "Id": 1051050,
    "Name": "Art",
    "Color": "orange",
    "Icon": null
  },
  {
    "Id": 1085084,
    "Name": "Sports",
    "Color": "green",
    "Icon": null
  },
  {
    "Id": 1085085,
    "Name": "Circus",
    "Color": "red",
    "Icon": null
  }
]
					</pre>
					<br/>

					<h2>Activities</h2>
					<p><code>/PublicApi/[RewriteUrl]/[Lang]/Tags/[Id]/Activities</code></p>
					<p>
						You can fetch activities attached to a tag with this call.
						It returns a list of activities that include the schedule information, available spots, price, etc.
					</p>
					<h3>Example</h3>
					<pre>$.get('https://www.amilia.com/PublicApi/usa-amilia-group/en/Tags/1051050/Activities');</pre>
					<h3>Result</h3>
					<pre>
[
  {
    "Id": 593490,
    "Name": "Pottery Class",
    "Description": "Pottery classes in our building",
    "Prerequisite": "must bring clay",
    "Note": "Picasso won't be there - but Mr Rogers will be there - who is nearly as good",
    "ExtraInformation": "",
    "AgeMin": 11,
    "AgeMax": 99,
    "AgeInMonths": false,
    "EffectiveBirthDay": null,
    "Sex": null,
    "Price": 99,
    "TaxStatus": 0,
    "MaxAttendance": 2147483647,
    "MaxPreAttendance": 2147483647,
    "ReservedPlaces": 0,
    "Location": "Amilia Building",
    "ResponsibleName": "Alastair Monk",
    "NbSegments": 4,
    "HasDropInEnabled": false,
    "HasSessionEnabled": true,
    "NbPlacesLeft": null,
    "Schedule": {
      "Id": 927970,
      "TimePeriod": {
        "Id": 927970,
        "StartTime": "11:00:00",
        "EndTime": "00:00:00",
        "Type": 2,
        "DayMask": 16,
        "StartDate": "2014-03-05T00:00:00",
        "EndDate": null,
        "NbOccurences": 4,
        "RecurrenceEndDate": "2014-03-31T00:00:00",
        "TimePeriodType": 2
      },
      "Address": null
    },
    "ShortBeginString": null,
    "Url": null,
    "SubCategoryId": 593487,
    "Position": 0,
    "State": 0
  },
  {
    "Id": 593497,
    "Name": "Lego Building",
    "Description": "Lego Building classes in our building",
    "Prerequisite": "must bring Lego!",
    "Note": "All children must be toilet trained",
    "ExtraInformation": "",
    "AgeMin": 4,
    "AgeMax": 16,
    "AgeInMonths": false,
    "EffectiveBirthDay": null,
    "Sex": null,
    "Price": 10,
    "TaxStatus": 0,
    "MaxAttendance": 2147483647,
    "MaxPreAttendance": 2147483647,
    "ReservedPlaces": 0,
    "Location": "Amilia Building",
    "ResponsibleName": "Alastair Monk",
    "NbSegments": 107,
    "HasDropInEnabled": false,
    "HasSessionEnabled": true,
    "NbPlacesLeft": null,
    "Schedule": {
      "Id": 927267,
      "TimePeriod": {
        "Id": 927267,
        "StartTime": "00:00:00",
        "EndTime": "23:59:59",
        "Type": 2,
        "DayMask": 4,
        "StartDate": "2014-08-15T00:00:00",
        "EndDate": null,
        "NbOccurences": 107,
        "RecurrenceEndDate": "2016-09-04T00:00:00",
        "TimePeriodType": 2
      },
      "Address": null
    },
    "ShortBeginString": null,
    "Url": null,
    "SubCategoryId": 593487,
    "Position": 1,
    "State": 0
  },
  {
    "Id": 623623,
    "Name": "Mike D's Heavy Metal Crash Course",
    "Description": "Mike DiSalvo sings the hardest - meanest Metal Vocals - and you can too!\r\n1.5hrs of crazy Cryptopsy Thrash Metal vocals - enough to turn the most Emo of you into legends!",
    "Prerequisite": "Must have a beard OR at least 4 piercings..",
    "Note": "beer welcome",
    "ExtraInformation": "",
    "AgeMin": 18,
    "AgeMax": 99,
    "AgeInMonths": false,
    "EffectiveBirthDay": null,
    "Sex": null,
    "Price": 25,
    "TaxStatus": 0,
    "MaxAttendance": 3,
    "MaxPreAttendance": 2147483647,
    "ReservedPlaces": 0,
    "Location": "Mike D's Palace",
    "ResponsibleName": "Mike DiSalvo",
    "NbSegments": 136,
    "HasDropInEnabled": false,
    "HasSessionEnabled": true,
    "NbPlacesLeft": null,
    "Schedule": {
      "Id": 933696,
      "TimePeriod": {
        "Id": 933696,
        "StartTime": "09:00:00",
        "EndTime": "10:30:00",
        "Type": 2,
        "DayMask": 8,
        "StartDate": "2014-01-07T00:00:00",
        "EndDate": null,
        "NbOccurences": 136,
        "RecurrenceEndDate": "2016-09-04T00:00:00",
        "TimePeriodType": 2
      },
      "Address": null
    },
    "ShortBeginString": null,
    "Url": null,
    "SubCategoryId": 623622,
    "Position": 0,
    "State": 0
  }
]
					</pre>
					<br/>

				</div>
			</div>
		</div>
		<footer>
			<div class="container">
				<p class="pull-left">&copy; 2017 <a href="https://www.amilia.com/en">Amilia Inc.</a></p>
				<p class="pull-right">Embed your Amilia Store using an IFRAME. <a href="https://github.com/AmiliaApp/amilia-demo-organization">Follow instructions on Github.</a></p>
			</div>
		</footer>
	</body>
</html>
